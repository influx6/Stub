var ExtensionManager=function(e){var e=e;e&&(e.ext=e.ext||e.extensions||{});var t=function(e){if(!i(e,"object"))throw Error("Extension must be Object or return an object!");if(!e.version)throw Error("Extension has no valid version information");if(!e.author)throw Error("Extension has no valid author information");if(!e.licenses)throw Error("Extension has no valid licenses information");if(!e.description)throw Error("Extension has no valid description information");if(!i(e.version,"string"))throw Error("Version's value is not a string in extension!");if(!i(e.author,"string"))throw Error("Author's value is not a string in extension!");if(!i(e.licenses,"array"))throw Error("Licence's must be an array of objects in extension  licenses:[ { type: mit, url: http://mths.be/mit }],!");if(!i(e.description,"string"))throw Error("Description's value is not a string in extension!");return e},n=function(e,t){if(!t)return[];var n=0,r=t.length,i,s={};for(;n<r;n++){i=t[n];if(!(i in e||i in e.ext))throw Error("Dependency is not found: "+i+" in "+(e.name||e.__name__||e.extensionName));s[i]=e[i]||e.ext[i]}return s},r=function(e){if("plugins"in e||"extensions"in e)extensions=e.plugins||e.extensions;return!1},i=function(e,t){return{}.toString.call(e).match(/\s([\w]+)/)[1].toLowerCase()===t.toLowerCase()},s=function(e,t,n){if(!e||!t)return;var r,s,u=this,a=!1;return i(e,"object")&&(s=o(e,!0),r=s.length),i(e,"array")&&(a=!0,r=e.length),t.collection=e,t.size=r,t.__ri__=r-1,t.pos=0,t.finish=n,t.item=null,t.next=function(){var e,n;return a||(n=s[t.pos]),e=t.collection[n],a&&(n=t.pos),e=t.collection[n],t.pos>=t.size?(t.finish&&t.finish(t.item,n,t.collection),!1):(t.pos++,e?(t.item=e,t(e,n,t.collection),!0):!1)},t},o=function(e,t){var n=0,r=[];for(var i in e)t?(r[n]=i,n++):(r[n]=e[i],n++);return r},u={__ext__:{ext:{}},create:function(r,s,u,a){var f=this.__ext__,l=f.ext,c=function(e,s,u){var a,f=n(e,u);i(s,"function")&&(a=t(s.apply(s,o(f)))),i(s,"object")&&(s.depends=f,a=s),e.ext[r]=t(a),e.ext[r].extensionName=r,e.ext[r].signature="__extensions__",e[r]=e.ext[r]};if(!a&&(f[r]||l[r]))throw Error("Extension Already Exist!");if(u&&!i(u,"array"))throw Error("Dependency list must be an Array!");if(!i(r,"string"))throw Error("Arguments are not the proper types!");return e?(c(e,s,u),e):(c(f,s,u),this)},remove:function(t){var n;if(this instanceof arguments.callee){n=this.__ext__,n[t]&&delete n[t],e&&(e[t]&&delete e[t],e.ext&&e.ext[t]&&delete e.ext[t]);return}n=e.ext;if(!n[t])return;return delete n[t],!0},give:function(e,t){if(!t)return!1;t.ext||(t.ext={});var n=0,r=this.__ext__,i,o=!1;arguments.length===2&&(o=!0);if(!o){var u=[].splice.call(arguments,2);i=s(u,function(n,i,s){if(!e&&(t[n]||t.ext[n]))return;t.ext[n]=r.ext[n],t[n]=t.ext[n]})}else i=s(r,function(n,i){if(!e&&(t[i]||t.ext[i]))return;t.ext[i]=r.ext[i],t[i]=t.ext[i];return});while(i.next());return t}};return u};module.exports&&(module.exports=ExtensionManager)